<!DOCTYPE html>
<html lang="en">

<head>
  <title>Users</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />
  <link rel="stylesheet" href="/styles/resources.css" />

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/resources.js"></script>
</head>

<body>
  <%- include('partials/_header.ejs') %>
    <%- include('partials/_footer.ejs') %>
      <main>
        <h1 class="title-header">Resources Search Page</h1>
        <section class="resources-main">
            <% searchResults.forEach(resource=> { %>
              <% const matchingCategory=searchResultsCategories.find(category=> category.id === resource.id); %>
              <% const matchingAvgRating=searchResultsAverageRatings.find(avgRating=> avgRating.id === resource.id); %>
                <a href="/resources/<%= resource.id %>">
                  <div class="resource-card">
                    <div class="card-content">
                      <div class="resource-card-title">
                        <%= resource.title %>
                      </div>
                      <img src="<%= resource.thumbnail_url %>" alt="thumbnail image" class="thumbnail_img"/>
                    </div>
                    <div class="category">
                      <%= matchingCategory.category_topic %>
                    </div>
                    <% if (matchingAvgRating) { %>
                      <!-- <div class="avg-rating">Average Rating: <%= matchingAvgRating.avg_rating %></div> -->

                      <% if (matchingAvgRating.avg_rating==='5' ) { %>
                        <img src="/docs/5 stars.svg" />
                        <% } else if (matchingAvgRating.avg_rating==='4' ) { %>
                          <img src="/docs/4 stars.svg" />
                          <% } else if (matchingAvgRating.avg_rating==='3' ) { %>
                            <img src="/docs/3 stars.svg" />
                            <% } else if (matchingAvgRating.avg_rating==='2' ) { %>
                              <img src="/docs/2 stars.svg" />
                              <% } else if (matchingAvgRating.avg_rating==='1' ) { %>
                                <img src="/docs/1 star.svg" />

                                <% } } else { %>
                                  <div class="avg-rating">No Ratings Yet</div>
                                  <% } %>
                  </div>
                </a>
                <% }); %>
        </section>
      </main>
</body>

</html>
